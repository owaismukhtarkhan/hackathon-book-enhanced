"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[245],{3147(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var i=n(4848),r=n(8453);const o={title:"Nodes, Topics, and Services",sidebar_label:"Nodes, Topics, and Services"},t="Nodes, Topics, and Services",c={id:"modules/week-03-05-ros2/nodes-topics-services",title:"Nodes, Topics, and Services",description:"Understanding ROS 2 Communication Patterns",source:"@site/docs/modules/week-03-05-ros2/nodes-topics-services.md",sourceDirName:"modules/week-03-05-ros2",slug:"/modules/week-03-05-ros2/nodes-topics-services",permalink:"/hackathon-book-enhanced/docs/modules/week-03-05-ros2/nodes-topics-services",draft:!1,unlisted:!1,editUrl:"https://github.com/owaismukhtarkhan/hackathon-book/tree/main/docs/modules/week-03-05-ros2/nodes-topics-services.md",tags:[],version:"current",frontMatter:{title:"Nodes, Topics, and Services",sidebar_label:"Nodes, Topics, and Services"},sidebar:"tutorialSidebar",previous:{title:"ROS 2 Architecture",permalink:"/hackathon-book-enhanced/docs/modules/week-03-05-ros2/ros2-architecture"},next:{title:"Python-based ROS Packages",permalink:"/hackathon-book-enhanced/docs/modules/week-03-05-ros2/python-ros-packages"}},l={},a=[{value:"Understanding ROS 2 Communication Patterns",id:"understanding-ros-2-communication-patterns",level:2},{value:"Nodes",id:"nodes",level:2},{value:"What is a Node?",id:"what-is-a-node",level:3},{value:"Creating a Node",id:"creating-a-node",level:3},{value:"Topics - Publish/Subscribe Pattern",id:"topics---publishsubscribe-pattern",level:2},{value:"Core Concepts",id:"core-concepts",level:3},{value:"Characteristics",id:"characteristics",level:3},{value:"Quality of Service (QoS)",id:"quality-of-service-qos",level:3},{value:"Services - Request/Response Pattern",id:"services---requestresponse-pattern",level:2},{value:"Core Concepts",id:"core-concepts-1",level:3},{value:"Characteristics",id:"characteristics-1",level:3},{value:"Example Service Definition (.srv)",id:"example-service-definition-srv",level:3},{value:"Actions - Goal-Oriented Pattern",id:"actions---goal-oriented-pattern",level:2},{value:"Core Concepts",id:"core-concepts-2",level:3},{value:"Characteristics",id:"characteristics-2",level:3},{value:"Practical Example: Robot Control System",id:"practical-example-robot-control-system",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"nodes-topics-and-services",children:"Nodes, Topics, and Services"}),"\n",(0,i.jsxs)("div",{className:"neon-border",style:{padding:"20px",borderRadius:"8px",backgroundColor:"var(--ifm-color-emphasis-100)"},children:[(0,i.jsx)(s.h2,{id:"understanding-ros-2-communication-patterns",children:"Understanding ROS 2 Communication Patterns"}),(0,i.jsx)(s.p,{children:"ROS 2 provides three primary communication patterns for nodes to interact with each other:"})]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Topics"})," - Publish/subscribe pattern for streaming data"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Services"})," - Request/response pattern for synchronous operations"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Actions"})," - Goal-oriented pattern for long-running tasks with feedback"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"nodes",children:"Nodes"}),"\n",(0,i.jsx)(s.h3,{id:"what-is-a-node",children:"What is a Node?"}),"\n",(0,i.jsx)(s.p,{children:"A node is an executable process that uses ROS 2 to communicate with other nodes. Nodes:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Perform specific tasks (e.g., sensor processing, control algorithms)"}),"\n",(0,i.jsx)(s.li,{children:"Communicate with other nodes through topics, services, or actions"}),"\n",(0,i.jsx)(s.li,{children:"Can be written in different programming languages"}),"\n",(0,i.jsx)(s.li,{children:"Are managed by the ROS 2 execution model"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"creating-a-node",children:"Creating a Node"}),"\n",(0,i.jsx)(s.p,{children:"In Python, a basic node looks like this:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n"})}),"\n",(0,i.jsx)(s.h2,{id:"topics---publishsubscribe-pattern",children:"Topics - Publish/Subscribe Pattern"}),"\n",(0,i.jsx)(s.h3,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,i.jsx)(s.p,{children:"Topics enable asynchronous, one-way communication:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Publisher"}),": Sends messages to a topic"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Subscriber"}),": Receives messages from a topic"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Message"}),": Typed data structure that flows between nodes"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"characteristics",children:"Characteristics"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Asynchronous"}),": Publishers and subscribers don't need to run simultaneously"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Many-to-many"}),": Multiple publishers and subscribers can use the same topic"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Data-driven"}),": Communication triggered by data availability"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"quality-of-service-qos",children:"Quality of Service (QoS)"}),"\n",(0,i.jsx)(s.p,{children:"Topics support QoS settings to control communication behavior:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, QoSReliabilityPolicy, QoSHistoryPolicy\n\nqos_profile = QoSProfile(\n    depth=10,\n    reliability=QoSReliabilityPolicy.RELIABLE,\n    history=QoSHistoryPolicy.KEEP_LAST\n)\n"})}),"\n",(0,i.jsx)(s.h2,{id:"services---requestresponse-pattern",children:"Services - Request/Response Pattern"}),"\n",(0,i.jsx)(s.h3,{id:"core-concepts-1",children:"Core Concepts"}),"\n",(0,i.jsx)(s.p,{children:"Services enable synchronous, two-way communication:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Service Client"}),": Sends a request and waits for a response"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Service Server"}),": Processes requests and sends responses"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Service Type"}),": Defines the request and response message types"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"characteristics-1",children:"Characteristics"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Synchronous"}),": Client waits for server response"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"One-to-one"}),": Each request gets one response"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Request-response"}),": Well-defined input/output pattern"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"example-service-definition-srv",children:"Example Service Definition (.srv)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"# Request\nstring name\nint32 age\n---\n# Response\nbool success\nstring message\n"})}),"\n",(0,i.jsx)(s.h2,{id:"actions---goal-oriented-pattern",children:"Actions - Goal-Oriented Pattern"}),"\n",(0,i.jsx)(s.h3,{id:"core-concepts-2",children:"Core Concepts"}),"\n",(0,i.jsx)(s.p,{children:"Actions handle long-running operations with feedback:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Goal"}),": Request for a long-running operation"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Feedback"}),": Periodic updates on operation progress"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Result"}),": Final outcome of the operation"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"characteristics-2",children:"Characteristics"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Asynchronous"}),": Client doesn't block waiting"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Interruptible"}),": Operations can be canceled"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Progress reporting"}),": Feedback during execution"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"practical-example-robot-control-system",children:"Practical Example: Robot Control System"}),"\n",(0,i.jsx)(s.p,{children:"Let's consider a simple robot control system:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Sensor Node"}),": Publishes laser scan data to ",(0,i.jsx)(s.code,{children:"/scan"})," topic"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Navigation Node"}),": Subscribes to ",(0,i.jsx)(s.code,{children:"/scan"}),", provides ",(0,i.jsx)(s.code,{children:"/move_base"})," service"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"UI Node"}),": Calls ",(0,i.jsx)(s.code,{children:"/move_base"})," service with goal coordinates"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-mermaid",children:"graph LR\n    A[Sensor Node] --\x3e|/scan| B(Navigation Node)\n    C[UI Node] --\x3e|/move_base| B\n    B --\x3e|/cmd_vel| D[Robot Driver]\n"})}),"\n",(0,i.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(s.p,{children:"By the end of this module, you will be able to:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Create and manage ROS 2 nodes in Python"}),"\n",(0,i.jsx)(s.li,{children:"Implement publisher and subscriber nodes"}),"\n",(0,i.jsx)(s.li,{children:"Design and use service clients and servers"}),"\n",(0,i.jsx)(s.li,{children:"Understand when to use each communication pattern"}),"\n",(0,i.jsx)(s.li,{children:"Apply appropriate Quality of Service settings"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Topic naming"}),": Use consistent, descriptive names (e.g., ",(0,i.jsx)(s.code,{children:"/robot_name/sensor_type"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Message design"}),": Keep messages focused and efficient"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Error handling"}),": Implement proper error handling for all communication patterns"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Resource management"}),": Properly clean up publishers, subscribers, and services"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,i.jsx)(s.p,{children:"After mastering these communication patterns, you'll learn how to create complete ROS 2 packages with proper structure and build configuration."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,s,n){n.d(s,{R:()=>t,x:()=>c});var i=n(6540);const r={},o=i.createContext(r);function t(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);